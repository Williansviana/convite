<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ch√° de Revela√ß√£o - Confirma√ß√µes</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #fff3fb, #e3f7ff);
      color: #444;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 680px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    header {
      background: #e91e63;
      color: white;
      padding: 40px 30px;
      text-align: center;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .details {
      background: #fdf2f7;
      padding: 20px;
      border-bottom: 1px dashed #ffb6c1;
      font-size: 0.95rem;
      text-align: left;
    }

    .details p {
      margin: 6px 0;
    }

    .form-section {
      padding: 30px;
      background: #f9f9f9;
    }

    .form-group {
      margin: 15px 0;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #c2185b;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ffb6c1;
      border-radius: 8px;
      font-size: 1rem;
    }

    button {
      margin-top: 20px;
      padding: 14px 25px;
      background: #25D366;
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    button:hover {
      background: #128C7E;
      transform: scale(1.05);
    }

    .guest-list {
      padding: 30px;
      background: #f8f9fa;
    }

    .guest-list h3 {
      color: #c2185b;
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.4rem;
    }

    .guest-item {
      padding: 16px;
      background: white;
      border-radius: 10px;
      margin-bottom: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      border-left: 5px solid #e91e63;
    }

    .guest-item strong {
      color: #c2185b;
      font-size: 1.1rem;
    }

    .loading {
      text-align: center;
      color: #888;
      font-style: italic;
      padding: 20px;
    }

    .success {
      display: none;
      padding: 20px;
      background: #e8f5e9;
      color: #2e7d32;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 1.1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üéâ Ch√° de Revela√ß√£o</h1>
      <p class="subtitle">Vamos descobrir se vem menino ou menina!</p>
    </header>

    <div class="details">
      <p><strong>üìÖ Data:</strong> 15 de Junho de 2025</p>
      <p><strong>‚è∞ Hor√°rio:</strong> 16h</p>
      <p><strong>üìç Local:</strong> Sal√£o Alegria, Rua das Flores, 123</p>
    </div>

    <!-- Formul√°rio de Confirma√ß√£o -->
    <div class="form-section" id="formSection">
      <p style="font-weight: bold; color: #c2185b; margin-bottom: 15px;">Confirme sua presen√ßa:</p>

      <div class="form-group">
        <label for="nome">Seu nome completo *</label>
        <input type="text" id="nome" placeholder="Ex: Ana Silva" required />
      </div>

      <div class="form-group">
        <label for="acompanhantes">Quem vai com voc√™?</label>
        <textarea id="acompanhantes" placeholder="Ex: meu marido Jo√£o e minha filha Laura"></textarea>
      </div>

      <button id="enviarBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
          <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
          <path d="M10.97 4.61c-.27.27-.7.27-.98 0L7 1.63l-2.97 2.98c-.27.27-.7.27-.98 0-.27-.27-.27-.7 0-.98l3.47-3.47a1 1 0 0 1 1.41 0l3.47 3.47c.28.28.28.71 0 .98-.27.27-.7.27-.98 0z"/>
          <path d="m8 4.41-.97-.98c-.27-.27-.7-.27-.98 0-.27.27-.27.7 0 .98L7 5.39l.98-.98c.27-.27.7-.27.98 0 .27.27.27.7 0 .98l-.98.98.98.98c.27.27.27.7 0 .98-.27.27-.7.27-.98 0l-.98-.98-.98.98c-.27.27-.7.27-.98 0-.27-.27-.27-.7 0-.98l.98-.98-.98-.98c-.27-.27-.27-.7 0-.98.27-.27.7-.27.98 0l.98.98L8 4.41z"/>
          <path d="M7 14.37l2.97-2.98c.27-.27.7-.27.98 0 .27.27.27.7 0 .98l-3.47 3.47a1 1 0 0 1-1.41 0l-3.47-3.47c-.27-.27-.27-.7 0-.98.27-.27.7-.27.98 0L7 14.37z"/>
        </svg>
        Confirmar Presen√ßa
      </button>
      <p id="status" style="margin-top: 10px; font-size: 0.9rem; color: #d32f2f;"></p>
    </div>

    <!-- Mensagem de sucesso -->
    <div class="success" id="sucesso">
      <p><strong>üéâ Obrigado(a), <span id="nomeMostrado"></span>!</strong></p>
      <p>Sua presen√ßa √© um presente! Mal podemos esperar por voc√™! ‚ù§Ô∏è</p>
    </div>

    <!-- Lista P√∫blica de Confirmados -->
    <div class="guest-list">
      <h3>üíñ Amigos que j√° confirmaram (<span id="total">0</span>)</h3>
      <div id="listaConvidados">
        <p class="loading">Carregando amigos especiais...</p>
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <script>
    // üî• FIREBASE CONFIG - Substitua com suas credenciais
    const firebaseConfig = {
      apiKey: "AIzaSyB6y6m3EbvWDJTewD9KjBRuvevhoi8___Q",
      authDomain: "cha-revelacao-702ae.firebaseapp.com",
      databaseURL: "https://cha-revelacao-702ae-default-rtdb.firebaseio.com",
      projectId: "cha-revelacao-702ae",
      storageBucket: "cha-revelacao-702ae.firebasestorage.app",
      messagingSenderId: "715921788413",
      appId: "1:715921788413:web:1e0a1b83e11a775e4f5d94"
    };

    // Inicializa o Firebase
    try {
      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();
      const confirmacoesRef = db.ref("confirmacoes");

      const status = document.getElementById("status");
      const lista = document.getElementById("listaConvidados");
      const total = document.getElementById("total");

      // üî• TEMPO REAL: escuta mudan√ßas automaticamente
      confirmacoesRef.on("value", (snapshot) => {
        const data = snapshot.val();
        lista.innerHTML = "";
        let count = 0;

        if (data) {
          // Mostra do mais novo para o mais antigo
          Object.keys(data).reverse().forEach(key => {
            const item = data[key];
            const div = document.createElement("div");
            div.className = "guest-item";
            div.innerHTML = `
              <strong>${item.nome}</strong>
              <div style="font-size:0.9rem; color:#666; margin-top:4px;">
                Levar√°: ${item.acompanhantes || 'Apenas eu'}
              </div>
            `;
            lista.appendChild(div);
            count++;
          });
        } else {
          lista.innerHTML = "<p style='text-align:center; color:#888;'>Ningu√©m confirmou ainda. Seja o primeiro! üíï</p>";
        }
        total.textContent = count;
      }, (error) => {
        lista.innerHTML = `<p style="color:red; text-align:center;">‚ùå Erro ao carregar: ${error.message}</p>`;
      });

      // ‚úÖ Enviar nova confirma√ß√£o
      document.getElementById("enviarBtn").addEventListener("click", () => {
        const nome = document.getElementById("nome").value.trim();
        const acompanhantes = document.getElementById("acompanhantes").value.trim() || "Apenas eu";

        if (!nome) {
          status.textContent = "‚ö†Ô∏è Por favor, digite seu nome completo.";
          return;
        }

        // üî• Salva no Firebase (vis√≠vel para todos)
        confirmacoesRef.push({
          nome: nome,
          acompanhantes: acompanhantes,
          timestamp: Date.now()
        })
        .then(() => {
          // Sucesso
          document.getElementById("nomeMostrado").textContent = nome;
          document.getElementById("formSection").style.display = "none";
          document.getElementById("sucesso").style.display = "block";
          status.textContent = "";
        })
        .catch((error) => {
          status.textContent = "‚ùå Erro ao salvar: " + error.message;
        });
      });

    } catch (error) {
      document.getElementById("status").textContent = "‚ùå Erro no Firebase: " + error.message;
      document.getElementById("status").style.color = "red";
    }
  </script>
</body>
</html>